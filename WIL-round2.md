# WIL - 2주차 (소프트웨어 설계)

## 🧠 이번 주에 새로 배운 것
- 설계의 중요성
  - 설계는 소통의 도구

## 💭 이런 고민이 있었어요
1. 요구사항 명세 - 어디까지 자세하게, 어떤 관점에 대해서 적어야 할지 고민이 많았다.
   - 멘토링 이후 개발자가 아닌 사람들도 뭘 하고 싶은지 명확하게 알아야 하는 것이 요구사항 명세이고 소통의 도구라는 말을 듣고 적당히 자세하게 작성하려고 노력했다.
   - 개발자 관점의 용어는 최대한 줄여서 작성함
   - 각 시나리오 실패 시 오류 유형을 적기보다는 사용자가 마주칠 안내 메세지를 작성함
   - 조회했을 때 나오는 상세 필드를 구체적으로 작성하지는 않음 -> 대략 이해가 되게끔 전달할 수 있느냐에 초점을 맞춤
2. 좋아요 등록/취소 시퀀스 다이어그램을 나눠야할지, 말아야할지 고민
    1. 둘다 하나의 시퀀스로 그려내기에는 복잡하여 API 단위로 그리기로 결정
    2. 둘이 다른 api이므로 .. 같은 버튼을 눌렀을 때 좋아요 등록을 할 건지 취소할 건지는 프론트단에서 분기처리해야 한다고 생각함. 프론트에서 이미 좋아요 표시가 되어있으므로 좋아요 유무 정보를 가지고 있을 것임
    3. 하지만 멱등성을 유지하려면 좋아요 체크 로직이 백 단에도 있어야 할 것 같음 복잡해서 시퀀스 다이어그램에는 넣지 않음
    4. 그리고 체크한다고 해도 그에 대한 오류 메세지를 반환하지 않고 무시할 것이기 때문에 일단 시퀀스 다이어그램에는 생략함
    5. 멱등성 때문에 내부적으로 체크는 해도 동작 흐름을 바꾸지는 않음, 외부에서 보이는 응답은 항상 동일함
3. 로그인을 아예 안한 경우랑 사용자가 없을 경우를 둘 다 고려하기로 함
    1. 처음에는 미로그인만 적으려고 했음 .. 미로그인이면 유저 서비스에서 확인할 필요도 없고 컨트롤러 단에서 바로 로그인하라고 응답하면 될 줄 알았는데
    2. 뭐 .. 로그인을 했어도 잘못된 사용자일 수도 있는 가능성이 있으니까 (시스템을 완전히 믿으면 안됨) .. 그러면 좋아요 관련 데이터가 정합성이 떨어지게 되므로 .. 꼭 검증해야 함
4. 좋아요 등록/취소 다이어그램 간소화
    1. 유저랑 상품 둘다 유저 서비스, 상품 서비스에서 검증하는 것을 나타내려고 하니까 복잡해져서 하나로 간소화 함
5. 재고 ..객체는 필요없지만 상품 - 재고 테이블은 따로 만들어야 할듯 . 상품 마스터와 별개
    1. 상품 정보보다 재고 테이블은 변동이 잦은데 그때마다 상품 정보 모두 들어있는 테이블 조회하는 것이 별로임 —> 지금 구조에서는 불필요함
6. 시퀀스 다이어그램 완전 고수준에서 작성
    1. 현재 service, facade 수준까지 고려하기에는 부족하다고 판단하여 완전 기획자 마인드로 가져감
    2. 명확한 표현을 위해 생명선 추가
    3. 로그인 여부는 생략 (당연히 되어있다고 생각하고 작성)
    4. 모두 한글로 이해가 되게끔 작성
7. 도메인 객체 설계
    1. user안에 Like객체 리스트, Order객체 리스트 넣으려고 했으나 유저 정보만 필요한 경우에도 다른 데이터 불러올 수 있고 객체가 너무 커짐 방지하기 위해
    2. user에 연관 필드 포함 안하고 각 도메인에서 유저를 참조하도록 함
8. ERD 에서 point랑 stock에 대한 테이블을 따로 만들지 않음


## 💡 앞으로 실무에 써먹을 수 있을 것 같은 포인트
- 테스트 코드가 전무한 프로젝트 소스에 단위 테스트라도 작성해 봐야겠다.😀
- 처음부터 큰 그림을 그리지 않고 세부적인 부분부터 개발한 후에 지속적으로 리팩토링하는 방향으로 업무를 진행해야겠다.
  - 쓸데없는 완벽주의 금지

## 🤔 아쉬웠던 점 & 다음 주에 해보고 싶은 것
- "양철 인형"을 먼저 만들으라는 말이 와닿지 않은 채로, 일단 모든 걸 이해하면서 코딩하려고 했어서 시간이 오래 걸렸다 😅
- 다음 주부터는 일단 돌아가게끔 코딩을 먼저 하고 설계를 고민하면서 계속 코드를 리팩토링 하는 방향으로 프로젝트를 만들어 가고 싶다.
- Facade와 Service 나누는 기준을 공부해 보고 실제 프로젝트에서 잘 다뤄보고 싶다. 
